<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unbeatable RPS AI | Doulet Media</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        .choices {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }
        .choice {
            font-size: 50px;
            cursor: pointer;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.2s;
        }
        .choice:hover {
            transform: scale(1.1);
        }
        #result {
            font-size: 24px;
            margin: 20px 0;
            min-height: 60px;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        .anti-spam {
            color: red;
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Unbeatable RPS AI</h1>
    <p>Try to beat our anti-spam system</p>
    
    <div class="choices">
        <div class="choice" data-choice="rock">✊</div>
        <div class="choice" data-choice="paper">✋</div>
        <div class="choice" data-choice="scissors">✌️</div>
    </div>
    
    <div id="result">Make your move!</div>
    
    <div class="stats">
        <div>Games: <span id="games">0</span></div>
        <div>You: <span id="wins">0</span></div>
        <div>AI: <span id="ai-wins">0</span></div>
    </div>

    <script>
        // Ultra-efficient game state
        const game = {
            history: [],
            lastMove: null,
            streak: 0,
            counts: {rock: 0, paper: 0, scissors: 0},
            games: 0,
            wins: 0,
            aiWins: 0
        };

        // Move relationships
        const beats = {
            rock: 'scissors',
            paper: 'rock',
            scissors: 'paper'
        };
        
        const emoji = {
            rock: '✊ Rock',
            paper: '✋ Paper',
            scissors: '✌️ Scissors'
        };

        // DOM elements
        const resultEl = document.getElementById('result');
        
        // Event listeners
        document.querySelectorAll('.choice').forEach(choice => {
            choice.addEventListener('click', (e) => {
                const move = e.target.getAttribute('data-choice');
                play(move);
            });
        });

        function play(userMove) {
            game.games++;
            game.counts[userMove]++;
            
            // Detect repeated moves
            if (userMove === game.lastMove) {
                game.streak++;
                
                // INSTANT SPAM PROTECTION (after 2 repeats)
                if (game.streak >= 2) {
                    const aiMove = beats[userMove];
                    const result = `${emoji[userMove]} vs ${emoji[aiMove]} - AI wins! (Anti-spam)`;
                    resultEl.innerHTML = result + '<div class="anti-spam">Spam detected!</div>';
                    game.aiWins++;
                    updateStats();
                    game.lastMove = userMove;
                    return;
                }
            } else {
                game.streak = 0;
            }
            
            // Normal AI decision
            const aiMove = getAIMove(userMove);
            
            // Determine winner
            let result;
            if (userMove === aiMove) {
                result = `${emoji[userMove]} vs ${emoji[aiMove]} - Tie!`;
            } else if (beats[userMove] === aiMove) {
                result = `${emoji[userMove]} vs ${emoji[aiMove]} - You win!`;
                game.wins++;
            } else {
                result = `${emoji[userMove]} vs ${emoji[aiMove]} - AI wins!`;
                game.aiWins++;
            }
            
            // Update game
            resultEl.textContent = result;
            game.history.push(userMove);
            game.lastMove = userMove;
            
            // Keep history lean
            if (game.history.length > 20) game.history.shift();
            
            updateStats();
        }
        
        function getAIMove(userMove) {
            // 1. If losing streak, change strategy
            if (game.aiWins < game.wins - 5) {
                return beats[beats[userMove]]; // Counter expected counter
            }
            
            // 2. Frequency analysis
            const total = game.games || 1;
            if (total > 5) {
                const rockFreq = game.counts.rock / total;
                const paperFreq = game.counts.paper / total;
                
                // Weighted random based on opponent's habits
                const rand = Math.random();
                if (rand < rockFreq * 0.85) return 'paper';
                if (rand < (rockFreq + paperFreq) * 0.85) return 'scissors';
            }
            
            // 3. Fallback
            return ['rock','paper','scissors'][Math.floor(Math.random()*3)];
        }
        
        function updateStats() {
            document.getElementById('games').textContent = game.games;
            document.getElementById('wins').textContent = game.wins;
            document.getElementById('ai-wins').textContent = game.aiWins;
        }
    </script>
</body>
</html>
